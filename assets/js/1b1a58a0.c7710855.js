"use strict";(self.webpackChunkp_my_dm=self.webpackChunkp_my_dm||[]).push([[5516],{9254:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>c,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"salva/aplicaciones m\xf3viles/5 Persistencia/FireBase/Firestore/estructura de datos","title":"Estructura de Datos","description":"En Cloud Firestore, los datos se organizan bajo un modelo NoSQL orientado a documentos y colecciones. Este enfoque ofrece gran flexibilidad, permitiendo adaptar la estructura a las necesidades de la aplicaci\xf3n sin necesidad de migraciones complejas. A continuaci\xf3n, se explica en detalle c\xf3mo se gestionan las colecciones, documentos y subcolecciones, as\xed como los tipos de campos que puede manejar Firestore.","source":"@site/docs/salva/aplicaciones m\xf3viles/5 Persistencia/FireBase/Firestore/estructura de datos.md","sourceDirName":"salva/aplicaciones m\xf3viles/5 Persistencia/FireBase/Firestore","slug":"/salva/aplicaciones m\xf3viles/5 Persistencia/FireBase/Firestore/estructura de datos","permalink":"/docs/salva/aplicaciones m\xf3viles/5 Persistencia/FireBase/Firestore/estructura de datos","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3}}');var r=s(4848),i=s(8453);const c={sidebar_position:3},d="Estructura de Datos",a={},l=[{value:"1. <strong>Conceptos fundamentales</strong>",id:"1-conceptos-fundamentales",level:2},{value:"2. <strong>Creaci\xf3n y administraci\xf3n de colecciones</strong>",id:"2-creaci\xf3n-y-administraci\xf3n-de-colecciones",level:2},{value:"Crear o referenciar una colecci\xf3n",id:"crear-o-referenciar-una-colecci\xf3n",level:3},{value:"A\xf1adir un documento a una colecci\xf3n",id:"a\xf1adir-un-documento-a-una-colecci\xf3n",level:3},{value:"3. <strong>Documentos y sus campos</strong>",id:"3-documentos-y-sus-campos",level:2},{value:"Crear un documento con ID personalizado",id:"crear-un-documento-con-id-personalizado",level:3},{value:"Tipos de datos soportados",id:"tipos-de-datos-soportados",level:3},{value:"4. <strong>Subcolecciones: organizaci\xf3n jer\xe1rquica</strong>",id:"4-subcolecciones-organizaci\xf3n-jer\xe1rquica",level:2},{value:"Ejemplo: Usuarios y Pedidos",id:"ejemplo-usuarios-y-pedidos",level:3},{value:"Acceder a documentos de subcolecci\xf3n",id:"acceder-a-documentos-de-subcolecci\xf3n",level:3},{value:"5. <strong>Profundidad y dise\xf1o de la estructura</strong>",id:"5-profundidad-y-dise\xf1o-de-la-estructura",level:2},{value:"6. <strong>Ejemplo</strong>: Estructura Usuarios \u2192 Subcolecci\xf3n Pedidos",id:"6-ejemplo-estructura-usuarios--subcolecci\xf3n-pedidos",level:2}];function t(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"estructura-de-datos",children:"Estructura de Datos"})}),"\n",(0,r.jsxs)(n.p,{children:["En ",(0,r.jsx)(n.strong,{children:"Cloud Firestore"}),", los datos se organizan bajo un modelo NoSQL orientado a ",(0,r.jsx)(n.strong,{children:"documentos"})," y ",(0,r.jsx)(n.strong,{children:"colecciones"}),". Este enfoque ofrece gran flexibilidad, permitiendo adaptar la estructura a las necesidades de la aplicaci\xf3n sin necesidad de migraciones complejas. A continuaci\xf3n, se explica en detalle c\xf3mo se gestionan las colecciones, documentos y subcolecciones, as\xed como los tipos de campos que puede manejar Firestore."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"1-conceptos-fundamentales",children:["1. ",(0,r.jsx)(n.strong,{children:"Conceptos fundamentales"})]}),"\n",(0,r.jsxs)(n.p,{children:["Firestore emplea dos unidades principales: ",(0,r.jsx)(n.strong,{children:"colecciones"})," y ",(0,r.jsx)(n.strong,{children:"documentos"}),"."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Colecci\xf3n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Es un contenedor de documentos."}),"\n",(0,r.jsxs)(n.li,{children:["Cada ",(0,r.jsx)(n.strong,{children:"colecci\xf3n"})," se identifica por un nombre \xfanico dentro de la base de datos (por ejemplo, ",(0,r.jsx)(n.code,{children:"usuarios"}),", ",(0,r.jsx)(n.code,{children:"notas"}),", ",(0,r.jsx)(n.code,{children:"productos"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"No puede contener directamente otros documentos sin antes identificarlos (es decir, no se almacenan \u201cdocumentos sueltos\u201d fuera de colecciones)."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Documento"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Representa una entidad de datos (por ejemplo, un usuario, una nota, un pedido)."}),"\n",(0,r.jsx)(n.li,{children:"Tiene un identificador \xfanico (ID) asignado por Firestore o especificado por el desarrollador."}),"\n",(0,r.jsxs)(n.li,{children:["Almacena ",(0,r.jsx)(n.strong,{children:"campos"})," con valores (por ejemplo, ",(0,r.jsx)(n.code,{children:"nombre"}),", ",(0,r.jsx)(n.code,{children:"edad"}),", ",(0,r.jsx)(n.code,{children:"fechaCreacion"}),", ",(0,r.jsx)(n.code,{children:"listaTareas"}),", etc.)."]}),"\n",(0,r.jsxs)(n.li,{children:["Puede contener ",(0,r.jsx)(n.strong,{children:"subcolecciones"}),", que a su vez pueden contener m\xe1s documentos, y as\xed recursivamente."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Subcolecci\xf3n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Una ",(0,r.jsx)(n.strong,{children:"subcolecci\xf3n"})," es una colecci\xf3n anidada dentro de un documento."]}),"\n",(0,r.jsx)(n.li,{children:"Sirve para modelar relaciones jer\xe1rquicas de manera ordenada y escalable."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ejemplo"}),": Si tienes una colecci\xf3n ",(0,r.jsx)(n.code,{children:"usuarios"})," con un documento ",(0,r.jsx)(n.code,{children:"userId123"}),", dentro de ese documento podr\xedas tener una subcolecci\xf3n ",(0,r.jsx)(n.code,{children:"pedidos"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Campos"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Son los ",(0,r.jsx)(n.strong,{children:"atributos"})," guardados en un documento."]}),"\n",(0,r.jsxs)(n.li,{children:["Pueden ser de distintos tipos: ",(0,r.jsx)(n.code,{children:"String"}),", ",(0,r.jsx)(n.code,{children:"Number"}),", ",(0,r.jsx)(n.code,{children:"Boolean"}),", ",(0,r.jsx)(n.code,{children:"Date"}),", ",(0,r.jsx)(n.code,{children:"GeoPoint"}),", ",(0,r.jsx)(n.code,{children:"Array"}),", ",(0,r.jsx)(n.code,{children:"Map"}),", etc."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udd39 ",(0,r.jsx)(n.strong,{children:"Ejemplo Ejemplo Colecci\xf3n / Documento / subcolecci\xf3n / Campos"})]}),"\n",(0,r.jsx)("div",{style:{margin:"0 auto",width:"1000px"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Esquema de una colecci\xf3n B\xe1sica",src:s(816).A+"",title:"Esquema de una colecci\xf3n B\xe1sica",width:"1328",height:"260"})})}),"\n",(0,r.jsx)(n.admonition,{title:"Diagrama",type:"info",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usuarios"})," es la ",(0,r.jsx)(n.strong,{children:"colecci\xf3n"})," principal."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"userId123"})," es un ",(0,r.jsx)(n.strong,{children:"documento"})," que contiene campos como ",(0,r.jsx)(n.code,{children:"nombre"})," y ",(0,r.jsx)(n.code,{children:"edad"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Dentro de este documento, existe la ",(0,r.jsx)(n.strong,{children:"subcolecci\xf3n"})," ",(0,r.jsx)(n.code,{children:"pedidos"}),", donde cada documento representa un pedido espec\xedfico (",(0,r.jsx)(n.code,{children:"pedidoId456"}),")."]}),"\n"]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"2-creaci\xf3n-y-administraci\xf3n-de-colecciones",children:["2. ",(0,r.jsx)(n.strong,{children:"Creaci\xf3n y administraci\xf3n de colecciones"})]}),"\n",(0,r.jsx)(n.h3,{id:"crear-o-referenciar-una-colecci\xf3n",children:"Crear o referenciar una colecci\xf3n"}),"\n",(0,r.jsxs)(n.p,{children:["En Java (Android), para ",(0,r.jsx)(n.strong,{children:"obtener una referencia"})," a una colecci\xf3n se usa:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'FirebaseFirestore db = FirebaseFirestore.getInstance();\r\nCollectionReference usuariosRef = db.collection("usuarios");\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Si la colecci\xf3n ",(0,r.jsx)(n.code,{children:"usuarios"})," no existe a\xfan, Firestore la crear\xe1 impl\xedcitamente al momento de escribir el primer documento. No es necesario \u201ccrear\u201d las colecciones de manera expl\xedcita."]})}),"\n",(0,r.jsxs)(n.p,{children:["Adem\xe1s, existe la posibilida de usar la ",(0,r.jsx)(n.a,{href:"https://console.firebase.google.com/",children:"consola Firebase"})," para ",(0,r.jsx)(n.strong,{children:"A\xf1adir una colecci\xf3n"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["En la secci\xf3n ",(0,r.jsx)(n.strong,{children:"Datos"})," de Firestore pulsa sobre ",(0,r.jsx)(n.strong,{children:"Iniciar Colecci\xf3n"})]}),"\n"]}),"\n",(0,r.jsx)("div",{style:{margin:"0 auto",width:"800px"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Agrega una nueva colecion mediante la consola Firebase",src:s(6056).A+"",title:"Agrega una nueva colecion mediante la consola Firebase",width:"1078",height:"652"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Despues, agrega el primer documento."}),"\n"]}),"\n",(0,r.jsx)("div",{style:{margin:"0 auto",width:"500px"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Agrega un documento a la colecion",src:s(4765).A+"",title:"Agrega un documento a la colecion",width:"768",height:"790"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Podr\xe1s ver en la consola las colecciones con sus documentos relacionados..."}),"\n"]}),"\n",(0,r.jsx)("div",{style:{margin:"0 auto",width:"1000px"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Contenido de la colecion",src:s(842).A+"",title:"Contenido de la colecion",width:"1486",height:"560"})})}),"\n",(0,r.jsx)(n.h3,{id:"a\xf1adir-un-documento-a-una-colecci\xf3n",children:"A\xf1adir un documento a una colecci\xf3n"}),"\n",(0,r.jsxs)(n.p,{children:["Como hemos visto anteriormente, existe la posibilida de a\xf1adir docuentos a las colecciones mediante la ",(0,r.jsx)(n.a,{href:"https://console.firebase.google.com/",children:(0,r.jsx)(n.strong,{children:"consola Firebase"})}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Aunque tambi\xe9n podemos relizarlo ",(0,r.jsx)(n.strong,{children:"mediante c\xf3digo"}),"..."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'Map<String, Object> nuevoUsuario = new HashMap<>();\r\nnuevoUsuario.put("nombre", "Carlos");\r\nnuevoUsuario.put("edad", 30);\r\n\r\nusuariosRef.add(nuevoUsuario)\r\n    .addOnSuccessListener(documentReference -> {\r\n        Log.d("Firestore", "Documento creado con ID: " + documentReference.getId());\r\n    })\r\n    .addOnFailureListener(e -> {\r\n        Log.e("Firestore", "Error al crear documento", e);\r\n    });\n'})}),"\n",(0,r.jsx)(n.admonition,{title:"explicaci\xf3n",type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"add(...)"})," crea el documento con un ",(0,r.jsx)(n.strong,{children:"ID autom\xe1tico"})," asignado por Firestore."]}),"\n",(0,r.jsxs)(n.li,{children:["Si deseas asignar un ",(0,r.jsx)(n.strong,{children:"ID personalizado"}),", puedes usar ",(0,r.jsx)(n.code,{children:'document("miIdPersonalizado")'})," y luego ",(0,r.jsx)(n.code,{children:"set(...)"}),"."]}),"\n"]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"3-documentos-y-sus-campos",children:["3. ",(0,r.jsx)(n.strong,{children:"Documentos y sus campos"})]}),"\n",(0,r.jsxs)(n.p,{children:["Los ",(0,r.jsx)(n.strong,{children:"documentos"})," representan el n\xfacleo de la informaci\xf3n en Firestore. Cada documento:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Puede tener un n\xfamero ilimitado de campos."}),"\n",(0,r.jsxs)(n.li,{children:["Puede anidar estructuras de tipo ",(0,r.jsx)(n.code,{children:"Map"})," y ",(0,r.jsx)(n.code,{children:"Array"})," para representar datos m\xe1s complejos."]}),"\n",(0,r.jsx)(n.li,{children:"Tiene un tama\xf1o m\xe1ximo recomendado de 1 MiB (incluyendo campos y metadatos)."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"crear-un-documento-con-id-personalizado",children:"Crear un documento con ID personalizado"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'Map<String, Object> producto = new HashMap<>();\r\nproducto.put("nombre", "Camiseta");\r\nproducto.put("precio", 19.99);\r\n\r\ndb.collection("productos")\r\n  .document("camiseta123")\r\n  .set(producto)\r\n  .addOnSuccessListener(aVoid -> {\r\n      Log.d("Firestore", "Documento creado/actualizado con ID: camiseta123");\r\n  })\r\n  .addOnFailureListener(e -> {\r\n      Log.e("Firestore", "Error al escribir documento", e);\r\n  });\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Si el documento no exist\xeda, se crea. Si ya exist\xeda, se ",(0,r.jsx)(n.strong,{children:"sobrescribe"})," (actualiza sus campos a los valores indicados)."]})}),"\n",(0,r.jsx)(n.h3,{id:"tipos-de-datos-soportados",children:"Tipos de datos soportados"}),"\n",(0,r.jsx)(n.p,{children:"Firestore permite varios tipos de datos comunes:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"String"}),": Texto Unicode."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Boolean"}),": ",(0,r.jsx)(n.code,{children:"true"})," o ",(0,r.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Number"}),": Puede ser ",(0,r.jsx)(n.code,{children:"long"})," (entero de 64 bits) o ",(0,r.jsx)(n.code,{children:"double"})," (coma flotante)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timestamp (Date)"}),": Almacena fecha y hora, compatible con ",(0,r.jsx)(n.code,{children:"java.util.Date"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Array"}),": Lista ordenada de valores (puede combinar diferentes tipos)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Map"}),": Estructura anidada de pares clave-valor."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GeoPoint"}),": Representa coordenadas geogr\xe1ficas (latitud, longitud)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reference"}),": Apunta a otro documento en la misma base de datos."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Null"}),": Valor nulo."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"4-subcolecciones-organizaci\xf3n-jer\xe1rquica",children:["4. ",(0,r.jsx)(n.strong,{children:"Subcolecciones: organizaci\xf3n jer\xe1rquica"})]}),"\n",(0,r.jsxs)(n.p,{children:["Para modelar estructuras complejas o relaciones de uno-a-muchos (por ejemplo, los pedidos de un usuario), Firestore permite ",(0,r.jsx)(n.strong,{children:"subcolecciones"})," dentro de un documento."]}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-usuarios-y-pedidos",children:"Ejemplo: Usuarios y Pedidos"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n// Referencia a la colecci\xf3n usuarios\r\nCollectionReference usuariosRef = db.collection("usuarios");\r\n\r\n// Documento espec\xedfico de un usuario\r\nDocumentReference usuarioDoc = usuariosRef.document("userId123");\r\n\r\n// Subcolecci\xf3n de pedidos dentro del documento userId123\r\nCollectionReference pedidosRef = usuarioDoc.collection("pedidos");\r\n\r\n// Agregar un pedido a la subcolecci\xf3n\r\nMap<String, Object> nuevoPedido = new HashMap<>();\r\nnuevoPedido.put("fecha", new Date());\r\nnuevoPedido.put("total", 59.99);\r\n\r\npedidosRef.add(nuevoPedido)\r\n    .addOnSuccessListener(documentReference -> {\r\n        Log.d("Firestore", "Pedido creado con ID: " + documentReference.getId());\r\n    })\r\n    .addOnFailureListener(e -> {\r\n        Log.e("Firestore", "Error al crear pedido", e);\r\n    });\n'})}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsx)(n.mdxAdmonitionTitle,{children:(0,r.jsx)(n.strong,{children:"Ventajas de las subcolecciones:"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Mantienes una relaci\xf3n \u201cjer\xe1rquica\u201d clara: cada usuario tiene su propia colecci\xf3n de pedidos."}),"\n",(0,r.jsxs)(n.li,{children:["Puedes ",(0,r.jsx)(n.strong,{children:"escalar"})," cada subcolecci\xf3n de forma independiente."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reglas de seguridad"})," m\xe1s simples: Podr\xedas restringir que cada usuario solo acceda a su subcolecci\xf3n de pedidos."]}),"\n"]})]}),"\n",(0,r.jsx)(n.h3,{id:"acceder-a-documentos-de-subcolecci\xf3n",children:"Acceder a documentos de subcolecci\xf3n"}),"\n",(0,r.jsxs)(n.p,{children:["Para ",(0,r.jsx)(n.strong,{children:"leer"})," un documento en la subcolecci\xf3n:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'pedidosRef.document("pedidoId456")\r\n    .get()\r\n    .addOnSuccessListener(documentSnapshot -> {\r\n        if (documentSnapshot.exists()) {\r\n            Log.d("Firestore", "Pedido: " + documentSnapshot.getData());\r\n        } else {\r\n            Log.d("Firestore", "Documento no existe");\r\n        }\r\n    })\r\n    .addOnFailureListener(e -> {\r\n        Log.e("Firestore", "Error al leer pedido", e);\r\n    });\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"5-profundidad-y-dise\xf1o-de-la-estructura",children:["5. ",(0,r.jsx)(n.strong,{children:"Profundidad y dise\xf1o de la estructura"})]}),"\n",(0,r.jsxs)(n.p,{children:["Aunque Firestore permite anidar subcolecciones de forma ilimitada, es recomendable ",(0,r.jsx)(n.strong,{children:"no"})," abusar de la profundidad. Un dise\xf1o con demasiados niveles puede complicar las consultas y la seguridad. En general, busca un ",(0,r.jsx)(n.strong,{children:"equilibrio"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Usa ",(0,r.jsx)(n.strong,{children:"subcolecciones"})," cuando necesites agrupar datos muy relacionados y potencialmente extensos (por ejemplo, m\xfaltiples documentos hijos)."]}),"\n",(0,r.jsxs)(n.li,{children:["Usa ",(0,r.jsxs)(n.strong,{children:["campos tipo ",(0,r.jsx)(n.code,{children:"Map"})]})," si la anidaci\xf3n es relativamente peque\xf1a y no necesitar\xe1s consultas espec\xedficas en esos campos."]}),"\n",(0,r.jsxs)(n.li,{children:["Ten en cuenta la ",(0,r.jsx)(n.strong,{children:"desnormalizaci\xf3n"}),": en bases de datos NoSQL, a veces es preferible duplicar datos para facilitar lecturas r\xe1pidas en lugar de un modelo relacional puro."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"6-ejemplo-estructura-usuarios--subcolecci\xf3n-pedidos",children:["6. ",(0,r.jsx)(n.strong,{children:"Ejemplo"}),": Estructura Usuarios \u2192 Subcolecci\xf3n Pedidos"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public class FirestoreExample {\r\n\r\n    private FirebaseFirestore db;\r\n\r\n    public FirestoreExample() {\r\n        db = FirebaseFirestore.getInstance();\r\n    }\r\n\r\n    public void crearUsuarioConPedido() {\r\n        // 1. Crear usuario\r\n        Map<String, Object> usuario = new HashMap<>();\r\n        usuario.put("nombre", "Carlos");\r\n        usuario.put("edad", 30);\r\n        usuario.put("email", "carlos@example.com");\r\n\r\n        DocumentReference usuarioRef = db.collection("usuarios").document("userId123");\r\n        usuarioRef.set(usuario)\r\n            .addOnSuccessListener(aVoid -> {\r\n                Log.d("Firestore", "Usuario creado/actualizado con userId123");\r\n\r\n                // 2. A\xf1adir un pedido en la subcolecci\xf3n "pedidos"\r\n                Map<String, Object> pedido = new HashMap<>();\r\n                pedido.put("fecha", new Date());\r\n                pedido.put("total", 59.99);\r\n                pedido.put("estado", "Enviado");\r\n\r\n                usuarioRef.collection("pedidos").add(pedido)\r\n                    .addOnSuccessListener(docRef -> {\r\n                        Log.d("Firestore", "Pedido creado con ID: " + docRef.getId());\r\n                    })\r\n                    .addOnFailureListener(e -> {\r\n                        Log.e("Firestore", "Error al crear el pedido", e);\r\n                    });\r\n\r\n            })\r\n            .addOnFailureListener(e -> {\r\n                Log.e("Firestore", "Error al crear/actualizar usuario", e);\r\n            });\r\n    }\r\n}\n'})}),"\n",(0,r.jsx)(n.admonition,{title:"EXPLICACI\xf3N",type:"note",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Creamos o actualizamos"})," un documento en la colecci\xf3n ",(0,r.jsx)(n.code,{children:"usuarios"})," con ID ",(0,r.jsx)(n.code,{children:"userId123"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"A\xf1adimos"})," un documento en la subcolecci\xf3n ",(0,r.jsx)(n.code,{children:"pedidos"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Comprobamos los listeners de \xe9xito o error para mostrar mensajes de log."}),"\n"]})}),"\n",(0,r.jsx)(n.hr,{})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},4765:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/agregaDocumento-02d1156816b5770b3a10fe735fbb8883.png"},6056:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/agregarColeccion-3142ee952529da41a095c4c03cd724b9.png"},816:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/coleccionFirestore-b6d4885c61af39658f33fc351eea1786.png"},842:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/detalleColeccion-8aabdbab153eb7ee2068c5531a9c8ff1.png"},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>d});var o=s(6540);const r={},i=o.createContext(r);function c(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);