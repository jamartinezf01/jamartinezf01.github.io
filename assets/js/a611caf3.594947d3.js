"use strict";(self.webpackChunkp_my_dm=self.webpackChunkp_my_dm||[]).push([[6165],{2896:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"python/UT7 - Persistencia/7.2 Ficheros/7.2.3_ficheros_csv","title":"7.2.3 Ficheros CSV","description":"El formato CSV (Comma Separated Values) se usa para guardar tablas de datos en texto plano.","source":"@site/docs/python/UT7 - Persistencia/7.2 Ficheros/7.2.3_ficheros_csv.md","sourceDirName":"python/UT7 - Persistencia/7.2 Ficheros","slug":"/python/UT7 - Persistencia/7.2 Ficheros/7.2.3_ficheros_csv","permalink":"/docs/python/UT7 - Persistencia/7.2 Ficheros/7.2.3_ficheros_csv","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"pythonSidebar","previous":{"title":"7.2.2 Procesamiento de datos","permalink":"/docs/python/UT7 - Persistencia/7.2 Ficheros/7.2.2_procesamiento_datos"},"next":{"title":"7.2.4 Ficheros JSON","permalink":"/docs/python/UT7 - Persistencia/7.2 Ficheros/7.2.4_ficheros_json"}}');var n=r(4848),s=r(8453);const a={sidebar_position:4},o="7.2.3 Ficheros CSV",d={},l=[{value:"<strong>1\ufe0f\u20e3 Qu\xe9 es un CSV exactamente</strong>",id:"1\ufe0f\u20e3-qu\xe9-es-un-csv-exactamente",level:2},{value:"<strong>2\ufe0f\u20e3 Lectura</strong>",id:"2\ufe0f\u20e3-lectura",level:2},{value:"\ud83d\udfe9 Lectura b\xe1sica con <code>csv.reader</code>",id:"-lectura-b\xe1sica-con-csvreader",level:3},{value:"\ud83d\udfe6 Lectura con <code>DictReader</code>",id:"-lectura-con-dictreader",level:3},{value:"\ud83d\udfe8 Comparativa de funcionamiento (<code>reader</code> vs <code>DictReader</code>)",id:"-comparativa-de-funcionamiento-reader-vs-dictreader",level:3},{value:"<strong>3\ufe0f\u20e3 Escritura con <code>csv.writer</code> y <code>DictWriter</code></strong>",id:"3\ufe0f\u20e3-escritura-con-csvwriter-y-dictwriter",level:2},{value:"\ud83d\udfe9 Opci\xf3n 1: <code>writer</code> (listas)",id:"-opci\xf3n-1-writer-listas",level:3},{value:"\ud83d\udfe6 Opci\xf3n 2: <code>DictWriter</code> (diccionarios)",id:"-opci\xf3n-2-dictwriter-diccionarios",level:3},{value:"\ud83d\udfe8 Comparativa de funcionamiento (<code>writer</code> vs <code>DictWriter</code>)",id:"-comparativa-de-funcionamiento-writer-vs-dictwriter",level:3},{value:"<strong>4\ufe0f\u20e3 Ejemplo completo: leer, transformar y guardar</strong>",id:"4\ufe0f\u20e3-ejemplo-completo-leer-transformar-y-guardar",level:2},{value:"<strong>\u2705 Buenas pr\xe1cticas recomendadas</strong>",id:"-buenas-pr\xe1cticas-recomendadas",level:2},{value:"<strong>\ud83e\uddea Ejercicios pr\xe1cticos</strong> \u2013 Operaci\xf3n Mercurio",id:"-ejercicios-pr\xe1cticos--operaci\xf3n-mercurio",level:2},{value:"\ud83d\udfe2 Fase 1 \u2013 Lectura e inspecci\xf3n inicial",id:"-fase-1--lectura-e-inspecci\xf3n-inicial",level:3},{value:"\ud83d\udfe9 Ejercicio 1 \u2013 Lectura base de ventas (<code>ventas_global.csv</code>)",id:"-ejercicio-1--lectura-base-de-ventas-ventas_globalcsv",level:4},{value:"\ud83d\udfe6 Ejercicio 2 \u2013 Lectura con formato europeo (<code>ventas_europa.csv</code>)",id:"-ejercicio-2--lectura-con-formato-europeo-ventas_europacsv",level:4},{value:"\ud83d\udfe1 Fase 2 \u2013 Lectura estructurada y validaci\xf3n",id:"-fase-2--lectura-estructurada-y-validaci\xf3n",level:3},{value:"\ud83d\udfe8 Ejercicio 3 \u2013 Facturaci\xf3n por canal con <code>DictReader</code> (<code>ventas_global.csv</code>)",id:"-ejercicio-3--facturaci\xf3n-por-canal-con-dictreader-ventas_globalcsv",level:4},{value:"\ud83d\udfe7 Ejercicio 4 \u2013 Detecci\xf3n de registros inconsistentes (<code>usuarios_plataforma.csv</code>)",id:"-ejercicio-4--detecci\xf3n-de-registros-inconsistentes-usuarios_plataformacsv",level:4},{value:"\ud83d\udd35 Fase 3 \u2013 Escritura de reportes CSV",id:"-fase-3--escritura-de-reportes-csv",level:3},{value:"\ud83d\udfe5 Ejercicio 5 \u2013 Resumen por categor\xeda con <code>writer</code> (<code>resumen_categorias.csv</code>)",id:"-ejercicio-5--resumen-por-categor\xeda-con-writer-resumen_categoriascsv",level:4},{value:"\ud83d\udfeb Ejercicio 6 \u2013 Exportaci\xf3n de usuarios activos con <code>DictWriter</code> (<code>usuarios_activos.csv</code>)",id:"-ejercicio-6--exportaci\xf3n-de-usuarios-activos-con-dictwriter-usuarios_activoscsv",level:4},{value:"\ud83d\udfea Ejercicio 7 \u2013 Comparativa de salida (<code>writer</code> vs <code>DictWriter</code>)",id:"-ejercicio-7--comparativa-de-salida-writer-vs-dictwriter",level:4},{value:"\ud83d\udd34 Fase Final \u2013 Entrega del informe",id:"-fase-final--entrega-del-informe",level:3},{value:"\ud83d\udfea Ejercicio 8 \u2013 Informe de cierre (<code>informe_csv.txt</code>)",id:"-ejercicio-8--informe-de-cierre-informe_csvtxt",level:4}];function t(e){const i={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"723-ficheros-csv",children:"7.2.3 Ficheros CSV"})}),"\n",(0,n.jsxs)(i.p,{children:["El formato ",(0,n.jsx)(i.strong,{children:"CSV"})," (",(0,n.jsx)(i.em,{children:"Comma Separated Values"}),") se usa para guardar tablas de datos en texto plano.\nEs muy habitual para intercambiar informaci\xf3n entre Excel, Google Sheets, aplicaciones web y scripts de Python."]}),"\n",(0,n.jsx)(i.p,{children:"Un CSV parece simple, pero tiene reglas importantes (separadores, comillas, saltos de l\xednea) que conviene entender bien."}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"1\ufe0f\u20e3-qu\xe9-es-un-csv-exactamente",children:(0,n.jsx)(i.strong,{children:"1\ufe0f\u20e3 Qu\xe9 es un CSV exactamente"})}),"\n",(0,n.jsx)(i.p,{children:"Piensa en un CSV como una tabla:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Cada l\xednea es una fila."}),"\n",(0,n.jsx)(i.li,{children:"Cada valor dentro de la l\xednea es una columna."}),"\n",(0,n.jsxs)(i.li,{children:["Los valores se separan con un delimitador (normalmente ",(0,n.jsx)(i.code,{children:","})," o ",(0,n.jsx)(i.code,{children:";"}),")."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Ejemplo:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-csv",children:"Nombre,Edad,Ciudad\nAna,20,Sevilla\nLuis,22,Malaga\n"})}),"\n",(0,n.jsxs)(i.admonition,{type:"info",children:[(0,n.jsxs)(i.mdxAdmonitionTitle,{children:["Por qu\xe9 usar el m\xf3dulo ",(0,n.jsx)(i.code,{children:"csv"})]}),(0,n.jsx)(i.p,{children:"Un error com\xfan es hacer esto:"}),(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-python",children:'linea = \'"Apple, Inc.",Cupertino,"1,200.50"\'\nprint(linea.split(","))\n'})}),(0,n.jsx)(i.p,{children:"Esto rompe datos v\xe1lidos porque hay comas dentro de comillas."}),(0,n.jsxs)(i.p,{children:["El m\xf3dulo ",(0,n.jsx)(i.code,{children:"csv"})," de Python ya resuelve estos casos correctamente y debe ser la opci\xf3n por defecto cuando trabajes con CSV reales."]})]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"2\ufe0f\u20e3-lectura",children:(0,n.jsx)(i.strong,{children:"2\ufe0f\u20e3 Lectura"})}),"\n",(0,n.jsxs)(i.h3,{id:"-lectura-b\xe1sica-con-csvreader",children:["\ud83d\udfe9 Lectura b\xe1sica con ",(0,n.jsx)(i.code,{children:"csv.reader"})]}),"\n",(0,n.jsxs)(i.p,{children:["Antes de usar opciones avanzadas, conviene dominar la lectura m\xe1s directa de un CSV. Con ",(0,n.jsx)(i.code,{children:"csv.reader"})," recorremos el archivo fila a fila y obtenemos cada registro como una lista de valores."]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-python",metastring:'title="Lectura simple"',children:'import csv\n\nwith open("alumnos.csv", "r", encoding="utf-8") as f:\n    lector = csv.reader(f)\n    for fila in lector:\n        print(fila)\n'})}),"\n",(0,n.jsx)(i.admonition,{type:"explicacion",children:(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:'open(..., "r")'})," abre el archivo en modo lectura."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"csv.reader(f)"})," crea un iterador de filas."]}),"\n",(0,n.jsxs)(i.li,{children:["Cada ",(0,n.jsx)(i.code,{children:"fila"})," es una lista de cadenas."]}),"\n"]})}),"\n",(0,n.jsxs)(i.admonition,{title:"Par\xe1metros \xfatiles en lectura",type:"tip",children:[(0,n.jsxs)(i.p,{children:["No todos los CSV usan coma. En muchos entornos (por ejemplo, Excel con configuraci\xf3n regional europea) se usa ",(0,n.jsx)(i.code,{children:";"}),"."]}),(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-python",children:'lector = csv.reader(f, delimiter=";", quotechar=\'"\')\n'})}),(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"delimiter"}),": separador de columnas (",(0,n.jsx)(i.code,{children:'","'}),", ",(0,n.jsx)(i.code,{children:'";"'}),", etc.)."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"quotechar"}),": car\xe1cter que protege textos con separadores internos."]}),"\n"]})]}),"\n",(0,n.jsxs)(i.h3,{id:"-lectura-con-dictreader",children:["\ud83d\udfe6 Lectura con ",(0,n.jsx)(i.code,{children:"DictReader"})]}),"\n",(0,n.jsx)(i.p,{children:"Cuando el CSV tiene cabecera, suele ser mejor leer por nombre de columna."}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-python",metastring:'title="Lectura por nombres de campo"',children:'import csv\n\nwith open("ventas.csv", "r", encoding="utf-8") as f:\n    lector = csv.DictReader(f)\n    for fila in lector:\n        print(f"Producto: {fila[\'Producto\']} | Total: {fila[\'Total\']}")\n'})}),"\n",(0,n.jsx)(i.admonition,{title:"Ventajas pr\xe1cticas",type:"info",children:(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"El c\xf3digo es m\xe1s legible."}),"\n",(0,n.jsxs)(i.li,{children:["Evitas errores por \xedndices (",(0,n.jsx)(i.code,{children:"fila[2]"}),", ",(0,n.jsx)(i.code,{children:"fila[3]"}),", etc.)."]}),"\n",(0,n.jsx)(i.li,{children:"Si cambia el orden de columnas, el c\xf3digo suele seguir funcionando."}),"\n"]})}),"\n",(0,n.jsxs)(i.h3,{id:"-comparativa-de-funcionamiento-reader-vs-dictreader",children:["\ud83d\udfe8 Comparativa de funcionamiento (",(0,n.jsx)(i.code,{children:"reader"})," vs ",(0,n.jsx)(i.code,{children:"DictReader"}),")"]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Criterio"}),(0,n.jsx)(i.th,{children:(0,n.jsx)(i.code,{children:"csv.reader"})}),(0,n.jsx)(i.th,{children:(0,n.jsx)(i.code,{children:"csv.DictReader"})})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Tipo de salida por fila"}),(0,n.jsx)(i.td,{children:"Lista"}),(0,n.jsx)(i.td,{children:"Diccionario"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Acceso a datos"}),(0,n.jsxs)(i.td,{children:["Por \xedndice (",(0,n.jsx)(i.code,{children:"fila[0]"}),")"]}),(0,n.jsxs)(i.td,{children:["Por nombre (",(0,n.jsx)(i.code,{children:'fila["Producto"]'}),")"]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Necesita cabecera"}),(0,n.jsx)(i.td,{children:"No"}),(0,n.jsxs)(i.td,{children:["S\xed (o ",(0,n.jsx)(i.code,{children:"fieldnames"}),")"]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Legibilidad del c\xf3digo"}),(0,n.jsx)(i.td,{children:"Media"}),(0,n.jsx)(i.td,{children:"Alta"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Caso ideal de uso"}),(0,n.jsx)(i.td,{children:"CSV simple o sin cabecera"}),(0,n.jsx)(i.td,{children:"CSV tabular con cabeceras"})]})]})]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"3\ufe0f\u20e3-escritura-con-csvwriter-y-dictwriter",children:(0,n.jsxs)(i.strong,{children:["3\ufe0f\u20e3 Escritura con ",(0,n.jsx)(i.code,{children:"csv.writer"})," y ",(0,n.jsx)(i.code,{children:"DictWriter"})]})}),"\n",(0,n.jsx)(i.p,{children:"Para guardar datos en CSV tambi\xe9n hay dos enfoques principales. Igual que en lectura, puedes trabajar con estructuras simples (listas) o con estructuras m\xe1s expresivas (diccionarios). Elegir uno u otro depende del tipo de datos y de la claridad que necesites en tu c\xf3digo."}),"\n",(0,n.jsxs)(i.h3,{id:"-opci\xf3n-1-writer-listas",children:["\ud83d\udfe9 Opci\xf3n 1: ",(0,n.jsx)(i.code,{children:"writer"})," (listas)"]}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"csv.writer"})," escribe cada fila como una lista de valores en orden."]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-python",metastring:'title="Escritura con listas"',children:'import csv\n\nfilas = [\n    ["Nombre", "Nivel", "Mundo"],\n    ["Mario", 10, "1-1"],\n    ["Luigi", 12, "2-4"],\n]\n\nwith open("partida.csv", "w", newline="", encoding="utf-8") as f:\n    escritor = csv.writer(f)\n    escritor.writerows(filas)\n'})}),"\n",(0,n.jsx)(i.admonition,{type:"explicacion",children:(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"writerow(...)"})," escribe una sola fila."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"writerows(...)"})," escribe varias filas de una vez (recibe una lista o iterable de filas)."]}),"\n",(0,n.jsxs)(i.li,{children:["Si ya tienes todos los datos en una estructura tipo lista de listas, ",(0,n.jsx)(i.code,{children:"writerows(...)"})," reduce c\xf3digo repetitivo."]}),"\n"]})}),"\n",(0,n.jsxs)(i.h3,{id:"-opci\xf3n-2-dictwriter-diccionarios",children:["\ud83d\udfe6 Opci\xf3n 2: ",(0,n.jsx)(i.code,{children:"DictWriter"})," (diccionarios)"]}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"csv.DictWriter"})," permite escribir por nombre de campo, lo que aporta m\xe1s legibilidad y control."]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-python",metastring:'title="Escritura con diccionarios"',children:'import csv\n\ncabecera = ["Nombre", "Nivel", "Mundo"]\npersonajes = [\n    {"Nombre": "Mario", "Nivel": 10, "Mundo": "1-1"},\n    {"Nombre": "Luigi", "Nivel": 12, "Mundo": "2-4"},\n]\n\nwith open("partida.csv", "w", newline="", encoding="utf-8") as f:\n    escritor = csv.DictWriter(f, fieldnames=cabecera)\n    escritor.writeheader()\n    escritor.writerows(personajes)\n'})}),"\n",(0,n.jsxs)(i.admonition,{type:"tip",children:[(0,n.jsxs)(i.mdxAdmonitionTitle,{children:[(0,n.jsx)(i.code,{children:"writeheader()"})," y ",(0,n.jsx)(i.code,{children:"writerows()"})," con ",(0,n.jsx)(i.code,{children:"DictWriter"})]}),(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"writeheader()"})," escribe la primera l\xednea con los nombres de columna definidos en ",(0,n.jsx)(i.code,{children:"fieldnames"}),"."]}),"\n",(0,n.jsx)(i.li,{children:"Es recomendable llamarlo una vez al principio para que el CSV quede autodescriptivo."}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"writerows(...)"})," escribe todas las filas de diccionarios respetando el orden de ",(0,n.jsx)(i.code,{children:"fieldnames"}),"."]}),"\n"]})]}),"\n",(0,n.jsxs)(i.h3,{id:"-comparativa-de-funcionamiento-writer-vs-dictwriter",children:["\ud83d\udfe8 Comparativa de funcionamiento (",(0,n.jsx)(i.code,{children:"writer"})," vs ",(0,n.jsx)(i.code,{children:"DictWriter"}),")"]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Criterio"}),(0,n.jsx)(i.th,{children:(0,n.jsx)(i.code,{children:"csv.writer"})}),(0,n.jsx)(i.th,{children:(0,n.jsx)(i.code,{children:"csv.DictWriter"})})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Tipo de entrada"}),(0,n.jsx)(i.td,{children:"Lista de listas"}),(0,n.jsx)(i.td,{children:"Lista de diccionarios"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Referencia de columnas"}),(0,n.jsx)(i.td,{children:"Por posici\xf3n"}),(0,n.jsxs)(i.td,{children:["Por nombre (",(0,n.jsx)(i.code,{children:"fieldnames"}),")"]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Cabecera autom\xe1tica"}),(0,n.jsx)(i.td,{children:"No"}),(0,n.jsxs)(i.td,{children:["S\xed (",(0,n.jsx)(i.code,{children:"writeheader()"}),")"]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Riesgo por cambio de orden"}),(0,n.jsx)(i.td,{children:"M\xe1s alto"}),(0,n.jsx)(i.td,{children:"M\xe1s bajo"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Caso ideal de uso"}),(0,n.jsx)(i.td,{children:"Datos simples y orden fijo"}),(0,n.jsx)(i.td,{children:"Datos tabulares con esquema claro"})]})]})]}),"\n",(0,n.jsxs)(i.admonition,{type:"important",children:[(0,n.jsxs)(i.mdxAdmonitionTitle,{children:["Uso de ",(0,n.jsx)(i.code,{children:'newline=""'})]}),(0,n.jsxs)(i.p,{children:["En Windows, si no usas ",(0,n.jsx)(i.code,{children:'newline=""'})," al escribir CSV, pueden aparecer l\xedneas en blanco extra."]})]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"4\ufe0f\u20e3-ejemplo-completo-leer-transformar-y-guardar",children:(0,n.jsx)(i.strong,{children:"4\ufe0f\u20e3 Ejemplo completo: leer, transformar y guardar"})}),"\n",(0,n.jsx)(i.p,{children:"Este ejemplo une todo lo anterior en un flujo \xfanico. La idea es que puedas reutilizar este patr\xf3n en casi cualquier tarea b\xe1sica de CSV."}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-python",metastring:'title="Pipeline CSV b\xe1sico"',children:'import csv\n\nentradas = []\n\nwith open("notas.csv", "r", encoding="utf-8") as f:\n    lector = csv.DictReader(f)\n    for fila in lector:\n        fila["Nota"] = float(fila["Nota"])\n        fila["Aprobado"] = "SI" if fila["Nota"] >= 5 else "NO"\n        entradas.append(fila)\n\nwith open("notas_resultado.csv", "w", newline="", encoding="utf-8") as f:\n    campos = ["Alumno", "Nota", "Aprobado"]\n    escritor = csv.DictWriter(f, fieldnames=campos)\n    escritor.writeheader()\n    escritor.writerows(entradas)\n'})}),"\n",(0,n.jsxs)(i.blockquote,{children:["\n",(0,n.jsx)(i.p,{children:"Este patr\xf3n (leer -> procesar -> escribir) es el flujo m\xe1s com\xfan en tareas de persistencia con CSV."}),"\n"]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"-buenas-pr\xe1cticas-recomendadas",children:(0,n.jsx)(i.strong,{children:"\u2705 Buenas pr\xe1cticas recomendadas"})}),"\n",(0,n.jsx)(i.admonition,{title:"buenas pr\xe1cticas",type:"tip",children:(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Usa siempre ",(0,n.jsx)(i.code,{children:"with open(...)"})," para cerrar el archivo ",(0,n.jsx)(i.strong,{children:"autom\xe1ticamente"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Indica ",(0,n.jsx)(i.code,{children:'encoding="utf-8"'})," para evitar problemas con ",(0,n.jsx)(i.strong,{children:"caracteres especiales"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Prefiere ",(0,n.jsx)(i.code,{children:"DictReader"}),"/",(0,n.jsx)(i.code,{children:"DictWriter"})," cuando trabajes con tablas con ",(0,n.jsx)(i.strong,{children:"cabeceras"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Valida datos antes de convertir tipos (",(0,n.jsx)(i.code,{children:"int"}),", ",(0,n.jsx)(i.code,{children:"float"}),", etc.) para evitar ",(0,n.jsx)(i.strong,{children:"errores silenciosos"}),"."]}),"\n"]})}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h2,{id:"-ejercicios-pr\xe1cticos--operaci\xf3n-mercurio",children:[(0,n.jsx)(i.strong,{children:"\ud83e\uddea Ejercicios pr\xe1cticos"})," \u2013 Operaci\xf3n Mercurio"]}),"\n",(0,n.jsxs)(i.p,{children:["Tras la auditor\xeda de logs de la unidad anterior, el equipo necesita pasar al siguiente nivel: ",(0,n.jsx)(i.strong,{children:"generar y consumir reportes CSV"})," para el panel de anal\xedtica."]}),"\n",(0,n.jsx)(i.p,{children:"Tu misi\xf3n ser\xe1 leer datos comerciales y de usuarios, validarlos y producir nuevos ficheros CSV listos para explotaci\xf3n."}),"\n",(0,n.jsxs)(i.p,{children:["Dispones de estos ficheros: \ud83d\udc49 ",(0,n.jsx)(i.strong,{children:(0,n.jsx)(i.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(4828).A+"",children:"Desc\xe1rgalos aqu\xed"})})]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"ventas_global.csv"})," -> ventas generales del sistema"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"ventas_europa.csv"})," -> ventas con formato europeo (",(0,n.jsx)(i.code,{children:";"})," y decimal con coma)"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"usuarios_plataforma.csv"})," -> estado de usuarios del sistema"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"-fase-1--lectura-e-inspecci\xf3n-inicial",children:"\ud83d\udfe2 Fase 1 \u2013 Lectura e inspecci\xf3n inicial"}),"\n",(0,n.jsxs)(i.h4,{id:"-ejercicio-1--lectura-base-de-ventas-ventas_globalcsv",children:["\ud83d\udfe9 Ejercicio 1 \u2013 Lectura base de ventas (",(0,n.jsx)(i.code,{children:"ventas_global.csv"}),")"]}),"\n",(0,n.jsxs)(i.p,{children:["Lee el archivo con ",(0,n.jsx)(i.code,{children:"csv.reader"})," y muestra:"]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"N\xfamero total de filas de datos (sin cabecera)."}),"\n",(0,n.jsx)(i.li,{children:"Primera venta registrada."}),"\n",(0,n.jsx)(i.li,{children:"\xdaltima venta registrada."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Objetivo: practicar lectura secuencial con listas."}),"\n",(0,n.jsxs)(i.h4,{id:"-ejercicio-2--lectura-con-formato-europeo-ventas_europacsv",children:["\ud83d\udfe6 Ejercicio 2 \u2013 Lectura con formato europeo (",(0,n.jsx)(i.code,{children:"ventas_europa.csv"}),")"]}),"\n",(0,n.jsx)(i.p,{children:"Procesa el fichero usando:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:'delimiter=";"'})}),"\n",(0,n.jsxs)(i.li,{children:["Conversi\xf3n de ",(0,n.jsx)(i.code,{children:"PrecioUnitario"})," de texto con coma decimal a ",(0,n.jsx)(i.code,{children:"float"})," real."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Muestra por pantalla el total de facturaci\xf3n europea."}),"\n",(0,n.jsx)(i.p,{children:"Objetivo: manejar dialectos y transformaci\xf3n de tipos en CSV."}),"\n",(0,n.jsx)(i.h3,{id:"-fase-2--lectura-estructurada-y-validaci\xf3n",children:"\ud83d\udfe1 Fase 2 \u2013 Lectura estructurada y validaci\xf3n"}),"\n",(0,n.jsxs)(i.h4,{id:"-ejercicio-3--facturaci\xf3n-por-canal-con-dictreader-ventas_globalcsv",children:["\ud83d\udfe8 Ejercicio 3 \u2013 Facturaci\xf3n por canal con ",(0,n.jsx)(i.code,{children:"DictReader"})," (",(0,n.jsx)(i.code,{children:"ventas_global.csv"}),")"]}),"\n",(0,n.jsxs)(i.p,{children:["Usando ",(0,n.jsx)(i.code,{children:"csv.DictReader"}),", calcula la facturaci\xf3n total por canal (",(0,n.jsx)(i.code,{children:"Web"}),", ",(0,n.jsx)(i.code,{children:"Tienda"}),", ",(0,n.jsx)(i.code,{children:"App"}),")."]}),"\n",(0,n.jsx)(i.p,{children:"Condiciones:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Convierte ",(0,n.jsx)(i.code,{children:"Unidades"})," a ",(0,n.jsx)(i.code,{children:"int"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Convierte ",(0,n.jsx)(i.code,{children:"PrecioUnitario"})," a ",(0,n.jsx)(i.code,{children:"float"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Acumula en un diccionario, por ejemplo: ",(0,n.jsx)(i.code,{children:'{"Web": 1200.0, "Tienda": 800.0, "App": 500.0}'}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Objetivo: trabajar con lectura por nombre de campo."}),"\n",(0,n.jsxs)(i.h4,{id:"-ejercicio-4--detecci\xf3n-de-registros-inconsistentes-usuarios_plataformacsv",children:["\ud83d\udfe7 Ejercicio 4 \u2013 Detecci\xf3n de registros inconsistentes (",(0,n.jsx)(i.code,{children:"usuarios_plataforma.csv"}),")"]}),"\n",(0,n.jsx)(i.p,{children:"Detecta y cuenta registros problem\xe1ticos:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Usuario marcado como ",(0,n.jsx)(i.code,{children:"activo=True"})," con ",(0,n.jsx)(i.code,{children:"ultimo_acceso"})," vac\xedo."]}),"\n",(0,n.jsxs)(i.li,{children:["Filas sin ",(0,n.jsx)(i.code,{children:"id"})," o sin ",(0,n.jsx)(i.code,{children:"nombre"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Muestra:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Total de registros inconsistentes."}),"\n",(0,n.jsx)(i.li,{children:"2 ejemplos de l\xedneas problem\xe1ticas."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Objetivo: validar calidad de datos antes de escribir nuevos CSV."}),"\n",(0,n.jsx)(i.h3,{id:"-fase-3--escritura-de-reportes-csv",children:"\ud83d\udd35 Fase 3 \u2013 Escritura de reportes CSV"}),"\n",(0,n.jsxs)(i.h4,{id:"-ejercicio-5--resumen-por-categor\xeda-con-writer-resumen_categoriascsv",children:["\ud83d\udfe5 Ejercicio 5 \u2013 Resumen por categor\xeda con ",(0,n.jsx)(i.code,{children:"writer"})," (",(0,n.jsx)(i.code,{children:"resumen_categorias.csv"}),")"]}),"\n",(0,n.jsx)(i.p,{children:"Genera un nuevo CSV con esta estructura:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-csv",children:"Categoria,UnidadesTotales,FacturacionTotal\n"})}),"\n",(0,n.jsx)(i.p,{children:"Condiciones:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Usa ",(0,n.jsx)(i.code,{children:"csv.writer"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Escribe primero la cabecera con ",(0,n.jsx)(i.code,{children:"writerow(...)"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Escribe el resto con ",(0,n.jsx)(i.code,{children:"writerows(...)"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Objetivo: practicar escritura basada en listas y control manual de columnas."}),"\n",(0,n.jsxs)(i.h4,{id:"-ejercicio-6--exportaci\xf3n-de-usuarios-activos-con-dictwriter-usuarios_activoscsv",children:["\ud83d\udfeb Ejercicio 6 \u2013 Exportaci\xf3n de usuarios activos con ",(0,n.jsx)(i.code,{children:"DictWriter"})," (",(0,n.jsx)(i.code,{children:"usuarios_activos.csv"}),")"]}),"\n",(0,n.jsxs)(i.p,{children:["Crea un fichero con solo usuarios v\xe1lidos y activos (",(0,n.jsx)(i.code,{children:"activo=True"})," y ",(0,n.jsx)(i.code,{children:"ultimo_acceso"})," no vac\xedo)."]}),"\n",(0,n.jsx)(i.p,{children:"Columnas obligatorias:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"id"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"nombre"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"rol"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"ultimo_acceso"})}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Condiciones:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Usa ",(0,n.jsx)(i.code,{children:"csv.DictWriter"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Define ",(0,n.jsx)(i.code,{children:"fieldnames"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Escribe cabecera con ",(0,n.jsx)(i.code,{children:"writeheader()"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Objetivo: consolidar escritura por diccionarios con esquema fijo."}),"\n",(0,n.jsxs)(i.h4,{id:"-ejercicio-7--comparativa-de-salida-writer-vs-dictwriter",children:["\ud83d\udfea Ejercicio 7 \u2013 Comparativa de salida (",(0,n.jsx)(i.code,{children:"writer"})," vs ",(0,n.jsx)(i.code,{children:"DictWriter"}),")"]}),"\n",(0,n.jsx)(i.p,{children:"Genera dos archivos con el mismo contenido (top 3 productos por unidades vendidas):"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"top_productos_writer.csv"})," (con ",(0,n.jsx)(i.code,{children:"csv.writer"}),")"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"top_productos_dictwriter.csv"})," (con ",(0,n.jsx)(i.code,{children:"csv.DictWriter"}),")"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Despu\xe9s, verifica que:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Tienen la misma cantidad de filas."}),"\n",(0,n.jsx)(i.li,{children:"Contienen la misma informaci\xf3n (aunque cambie el enfoque de escritura)."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Objetivo: entender en pr\xe1ctica cu\xe1ndo usar cada herramienta."}),"\n",(0,n.jsx)(i.h3,{id:"-fase-final--entrega-del-informe",children:"\ud83d\udd34 Fase Final \u2013 Entrega del informe"}),"\n",(0,n.jsxs)(i.h4,{id:"-ejercicio-8--informe-de-cierre-informe_csvtxt",children:["\ud83d\udfea Ejercicio 8 \u2013 Informe de cierre (",(0,n.jsx)(i.code,{children:"informe_csv.txt"}),")"]}),"\n",(0,n.jsx)(i.p,{children:"Genera un informe final en texto plano que incluya:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Total de ventas procesadas en ",(0,n.jsx)(i.code,{children:"ventas_global.csv"}),"."]}),"\n",(0,n.jsx)(i.li,{children:"Facturaci\xf3n total global."}),"\n",(0,n.jsx)(i.li,{children:"Facturaci\xf3n total europea."}),"\n",(0,n.jsx)(i.li,{children:"N\xfamero de registros inconsistentes de usuarios."}),"\n",(0,n.jsx)(i.li,{children:"N\xfamero de usuarios activos exportados."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Formato sugerido:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-txt",children:"Ventas globales procesadas: X\nFacturaci\xf3n global: XXXX.XX\nFacturaci\xf3n europea: XXXX.XX\nRegistros inconsistentes: X\nUsuarios activos exportados: X\n"})})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}},4828:(e,i,r)=>{r.d(i,{A:()=>c});const c=r.p+"assets/files/7_2_3_ficheros-dbe24b293dc24a1f386ecf9130596e50.zip"},8453:(e,i,r)=>{r.d(i,{R:()=>a,x:()=>o});var c=r(6540);const n={},s=c.createContext(n);function a(e){const i=c.useContext(s);return c.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),c.createElement(s.Provider,{value:i},e.children)}}}]);